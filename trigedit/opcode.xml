<GuiXml>
   <Controls>
      <TopLevelControl name="ItemTrig_OpcodeEdit"
         mouseEnabled="true"
         movable="true"
         clampedToScreen="true"
         hidden="true"
         inherits="ItemTrig_UITemplate_WWindow"
      >
         <Dimensions x="500" y="300" />
         <DimensionConstraints minX="400" minY="200" />
         <Anchor point="CENTER" />
         <OnInitialized> ItemTrig:setupWindow("opcodeEdit", self) </OnInitialized>
         <Controls>
            <Control name="$(parent)Row1" level="2"> <!-- need to raise the level so that controls in Body don't block clicks to the combobox when it's opened -->
               <Anchor point="TOPLEFT"  offsetY="7" relativeTo="$(parent)TitleBar" relativePoint="BOTTOMLEFT" />
               <Anchor point="TOPRIGHT" offsetY="7" relativeTo="$(parent)TitleBar" relativePoint="BOTTOMRIGHT" />
               <OnInitialized>
                  --
                  -- We can't use resizeToFitDescendants, because that's a constant 
                  -- thing; if you open the combobox, the container resizes to hold 
                  -- the combobox's contents.
                  --
                  ItemTrig.fitHeightToChildren(self)
               </OnInitialized>
               <Controls>
                  <Label text="ITEMTRIG_STRING_UI_OPCODEEDIT_LABEL_TYPE" font="ITEMTRIG_FONT_BASIC">
                     <Anchor point="TOPLEFT" />
                     <Anchor point="BOTTOMLEFT" />
                     <Dimensions x="113" />
                     <OnInitialized> self:SetColor(unpack(ItemTrig.theme.WINDOW_BARE_TEXT_COLOR)) </OnInitialized>
                  </Label>
                  <Control name="ItemTrig_OpcodeEdit_Opcode" inherits="ZO_ScrollableComboBox">
                     <Anchor point="TOPLEFT"  offsetX="120" />
                     <Anchor point="TOPRIGHT" />
                  </Control>
               </Controls>
            </Control>
            <Control name="$(parent)Bottom">
               <Anchor point="BOTTOMLEFT" />
               <Anchor point="BOTTOMRIGHT" />
               <OnInitialized>
                  ItemTrig.fitHeightToChildren(self)
               </OnInitialized>
               <Controls>
                  <Button inherits="ItemTrig_UITemplate_ThemedButton" name="$(parent)OK" text="ITEMTRIG_STRING_UI_OPCODEEDIT_BUTTON_SAVE">
                     <Anchor point="BOTTOMRIGHT" />
                     <OnClicked>
                        ItemTrig.windows.opcodeEdit:commit()
                     </OnClicked>
                  </Button>
                  <Button inherits="ItemTrig_UITemplate_ThemedButton" name="$(parent)Cancel" text="ITEMTRIG_STRING_UI_OPCODEEDIT_BUTTON_CANCEL">
                     <Anchor point="BOTTOMRIGHT" relativeTo="$(parent)OK" relativePoint="BOTTOMLEFT" offsetX="-8" />
                     <OnClicked>
                        ItemTrig.windows.opcodeEdit:cancel()
                     </OnClicked>
                  </Button>
               </Controls>
            </Control>
            <Control> <!-- body -->
               <Anchor point="TOPLEFT"     offsetY="7"  relativeTo="$(parent)Row1"   relativePoint="BOTTOMLEFT" />
               <Anchor point="BOTTOMRIGHT" offsetY="-7" relativeTo="$(parent)Bottom" relativePoint="TOPRIGHT" />
               <Controls>
                  <Texture name="$(parent)Bg" excludeFromResizeToFitExtents="true">
                     <AnchorFill />
                     <OnInitialized> self:SetColor(unpack(ItemTrig.theme.TEXTEDIT_BACKGROUND)) </OnInitialized>
                  </Texture>
                  <Label name="ItemTrig_OpcodeEdit_OpcodeBodyUnderlay" text="" font="ITEMTRIG_FONT_BASIC">
                     <Anchor point="TOPLEFT"     offsetX="7" />
                     <Anchor point="BOTTOMRIGHT" offsetX="-7" />
                     <OnInitialized> self:SetColor(unpack(ItemTrig.theme.TEXTEDIT_TEXT)) </OnInitialized>
                  </Label>
                  <Label name="ItemTrig_OpcodeEdit_OpcodeBody" text="" font="ITEMTRIG_FONT_BASIC"
                     mouseEnabled="true"
                     linkEnabled="true"
                     alpha="0"
                  >
                     <Anchor point="TOPLEFT"     offsetX="7" />
                     <Anchor point="BOTTOMRIGHT" offsetX="-7" />
                     <OnLinkMouseUp>
                        ItemTrig.windows.opcodeEdit:onLinkClicked(linkData, linkText, mouseButton, ctrl, alt, shift, command)
                     </OnLinkMouseUp>
                  </Label>
               </Controls>
            </Control>
         </Controls>
      </TopLevelControl>
   </Controls>
</GuiXml>