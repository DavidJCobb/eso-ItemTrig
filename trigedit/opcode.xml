<GuiXml>
   <Controls>
      <TopLevelControl name="ItemTrig_OpcodeEdit"
         mouseEnabled="true"
         movable="true"
         clampedToScreen="true"
         hidden="true"
         inherits="ItemTrig_UITemplate_WWindow"
      >
         <Dimensions x="500" y="300" />
         <DimensionConstraints minX="400" minY="200" />
         <Anchor point="CENTER" />
         <OnInitialized> ItemTrig:setupWindow("opcodeEdit", self) </OnInitialized>
         <Controls>
            <Control name="$(parent)Row1" level="2"> <!-- need to raise the level so that controls in Body don't block clicks to the combobox when it's opened -->
               <Anchor point="TOPLEFT" relativeTo="$(parent)TitleBar" relativePoint="BOTTOMLEFT" />
               <Anchor point="TOPRIGHT" relativeTo="$(parent)TitleBar" relativePoint="BOTTOMRIGHT" />
               <OnInitialized>
                  --
                  -- We can't use resizeToFitDescendants, because that's a constant 
                  -- thing; if you open the combobox, the container resizes to hold 
                  -- the combobox's contents.
                  --
                  ItemTrig.fitHeightToChildren(self)
               </OnInitialized>
               <Controls>
                  <Label text="ITEMTRIG_STRING_UI_OPCODEEDIT_LABEL_TYPE" font="ZoFontWinT1">
                     <Anchor point="TOPLEFT"  offsetX="5" offsetY="5" />
                  </Label>
                  <Control name="ItemTrig_OpcodeEdit_Opcode" inherits="ZO_ScrollableComboBox">
                     <Anchor point="TOPLEFT"  offsetX="120" offsetY="5" />
                     <Anchor point="TOPRIGHT" offsetX="-5" offsetY="5" />
                  </Control>
               </Controls>
            </Control>
            <Control name="$(parent)Bottom">
               <Anchor point="BOTTOMLEFT" />
               <Anchor point="BOTTOMRIGHT" />
               <OnInitialized>
                  ItemTrig.fitHeightToChildren(self)
               </OnInitialized>
               <Controls>
                  <Button inherits="ZO_DefaultButton" name="$(parent)OK" text="ITEMTRIG_STRING_UI_OPCODEEDIT_BUTTON_SAVE">
                     <Anchor point="BOTTOMRIGHT" />
                     <OnClicked>
                        ItemTrig.windows.opcodeEdit:commit()
                     </OnClicked>
                  </Button>
                  <Button inherits="ZO_DefaultButton" name="$(parent)Cancel" text="ITEMTRIG_STRING_UI_OPCODEEDIT_BUTTON_CANCEL">
                     <Anchor point="BOTTOMRIGHT" relativeTo="$(parent)OK" relativePoint="BOTTOMLEFT" offsetX="-8" />
                     <OnClicked>
                        local editor = ItemTrig.windows.opcodeEdit
                        if editor:requestExit() then
                           editor:abandon()
                        end
                     </OnClicked>
                  </Button>
               </Controls>
            </Control>
            <Control> <!-- body -->
               <Anchor point="TOPLEFT"     offsetY="5"  relativeTo="$(parent)Row1"   relativePoint="BOTTOMLEFT" />
               <Anchor point="BOTTOMRIGHT" offsetY="-5" relativeTo="$(parent)Bottom" relativePoint="TOPRIGHT" />
               <Controls>
                  <Backdrop name="$(parent)Bg" inherits="ZO_ThinBackdrop" />
                  <Label name="ItemTrig_OpcodeEdit_OpcodeBodyUnderlay" text="" font="ZoFontChat">
                     <Anchor point="TOPLEFT" />
                     <Anchor point="TOPRIGHT" />
                  </Label>
                  <Label name="ItemTrig_OpcodeEdit_OpcodeBody" text="" font="ZoFontChat"
                     mouseEnabled="true"
                     linkEnabled="true"
                     alpha="0"
                  >
                     <Anchor point="TOPLEFT" />
                     <Anchor point="TOPRIGHT" />
                     <OnLinkMouseUp>
                        ItemTrig.windows.opcodeEdit:onLinkClicked(linkData, linkText, mouseButton, ctrl, alt, shift, command)
                     </OnLinkMouseUp>
                  </Label>
               </Controls>
            </Control>
         </Controls>
      </TopLevelControl>
   </Controls>
</GuiXml>